"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99],{"./hooks/useStakeConnection.ts":function(e,t,n){n.d(t,{D:function(){return p},n:function(){return _}});var r=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../node_modules/next/dist/compiled/@babel/runtime/regenerator/index.js"),a=n.n(i),o=n("../staking/lib/app/index.js"),s=n("../node_modules/@solana/wallet-adapter-react/lib/esm/useConnection.js"),c=n("../node_modules/@solana/wallet-adapter-react/lib/esm/useAnchorWallet.js"),u=n("../node_modules/react-hot-toast/dist/index.mjs"),d=n("../node_modules/react-query/es/index.js"),l=n("./utils/capitalizeFirstLetter.ts"),_="create-stake-connection";function p(){var e=(0,s.R)().connection,t=(0,c.z)();return(0,d.useQuery)([_,null===t||void 0===t?void 0:t.publicKey.toString()],(0,r.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.StakeConnection.createStakeConnection(e,t,o.STAKING_ADDRESS);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))),{onError:function(e){u.ZP.error((0,l.f)(e.message))},enabled:void 0!==t})}},"./utils/capitalizeFirstLetter.ts":function(e,t,n){n.d(t,{f:function(){return r}});var r=function(e){return e.replace(/^\w/,(function(e){return e.toUpperCase()}))}},"../staking/lib/app/PositionAccountJs.js":function(e,t,n){var r=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/createClass.js"),i=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/classCallCheck.js"),a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PositionAccountJs=void 0;var c=n("../node_modules/@solana/web3.js/lib/index.browser.esm.js"),u=s(n("../node_modules/@coral-xyz/anchor/dist/cjs/coder/borsh/idl.js")),d=n("../staking/lib/app/StakeConnection.js"),l=r((function e(t,n){i(this,e);var r=u.IdlCoder.typeDefLayout({name:"OptionPosition",type:{kind:"struct",fields:[{name:"val",type:{option:{defined:"Position"}}}]}},n.types),a=0;t.slice(a,a+8);a+=8,this.owner=new c.PublicKey(t.slice(a,a+32)),a+=32,this.positions=[];for(var o=0;o<d.wasm.Constants.MAX_POSITIONS();o++)this.positions.push(r.decode(t,a).val),a+=d.wasm.Constants.POSITION_BUFFER_SIZE()}));t.PositionAccountJs=l},"../staking/lib/app/PythClient.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PythClient=void 0;var r=n("../staking/lib/app/StakeConnection.js");t.PythClient=r.StakeConnection},"../staking/lib/app/StakeConnection.js":function(e,t,n){var r=n("../node_modules/buffer/index.js").Buffer,i=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/slicedToArray.js"),a=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/toConsumableArray.js"),o=n("../node_modules/next/dist/compiled/@babel/runtime/regenerator/index.js"),s=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/classCallCheck.js"),c=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/createClass.js"),u=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&u(t,e,n);return d(t,e),t},_=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StakeAccount=t.VestingAccountState=t.StakeConnection=t.wasm=void 0;var f=n("../node_modules/@coral-xyz/anchor/dist/browser/index.js"),g=n("../node_modules/@solana/web3.js/lib/index.browser.esm.js"),h=l(n("../wasm/bundle/staking.js")),m=n("../node_modules/@solana/spl-token/lib/index.browser.esm.js"),y=p(n("../node_modules/bn.js/lib/bn.js")),v=l(n("../node_modules/@coral-xyz/anchor/dist/cjs/coder/borsh/idl.js")),k=p(n("../staking/lib/target/idl/staking.json")),b=l(n("../staking/lib/target/idl/wallet_tester.json")),w=n("../staking/lib/app/transaction.js"),S=n("../staking/lib/app/pythBalance.js"),A=n("../staking/node_modules/@solana/spl-governance/lib/index.js"),T=n("../staking/lib/app/constants.js"),P=p(n("../node_modules/assert/build/assert.js")),x=n("../staking/lib/app/PositionAccountJs.js"),E=l(n("../node_modules/next/dist/compiled/crypto-browserify/index.js")),M=h;t.wasm=M;var C,I=function(){function e(t,n,r,i,a,o){s(this,e),this.votingProduct={voting:{}},this.program=t,this.provider=n,this.config=r,this.configAddress=i,this.votingProductMetadataAccount=a,this.governanceAddress=(0,T.GOVERNANCE_ADDRESS)(),this.votingAccountMetadataWasm=o}return c(e,[{key:"userPublicKey",value:function(){return this.provider.wallet.publicKey}},{key:"getAllStakeAccountAddresses",value:function(){return _(this,void 0,void 0,o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.connection.getProgramAccounts(this.program.programId,{encoding:"base64",filters:[{memcmp:this.program.coder.accounts.memcmp("PositionData")}]});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.pubkey})));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getStakeAccounts",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r=this;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.program.provider.connection.getProgramAccounts(this.program.programId,{encoding:"base64",filters:[{memcmp:this.program.coder.accounts.memcmp("PositionData")},{memcmp:{offset:8,bytes:e.toBase58()}}]});case 2:return n=t.sent,t.next=5,Promise.all(n.map((function(e){return _(r,void 0,void 0,o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadStakeAccount(e.pubkey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getMainAccount",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getStakeAccounts(e);case 2:if(0!=(n=t.sent).length){t.next=7;break}return t.abrupt("return",void 0);case 7:return t.abrupt("return",n.reduce((function(e,t){return e.tokenBalance.lt(t.tokenBalance)?t:e})));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"fetchVotingProductMetadataAccount",value:function(){return _(this,void 0,void 0,o.mark((function e(){var t,n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.program.provider.connection.getAccountInfo(this.votingProductMetadataAccount);case 2:return t=e.sent,n=new M.WasmTargetMetadata(t.data),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"fetchPositionAccount",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r,i;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.program.provider.connection.getAccountInfo(e);case 2:return n=t.sent,r=new M.WasmPositionData(n.data),i=new x.PositionAccountJs(n.data,this.program.idl),t.abrupt("return",{stakeAccountPositionsWasm:r,stakeAccountPositionsJs:i});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"loadStakeAccount",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r,i,a,s,c,u,d,l,_,p,h;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchPositionAccount(e);case 2:return n=t.sent,r=n.stakeAccountPositionsWasm,i=n.stakeAccountPositionsJs,t.next=7,g.PublicKey.findProgramAddress([f.utils.bytes.utf8.encode(M.Constants.STAKE_ACCOUNT_METADATA_SEED()),e.toBuffer()],this.program.programId);case 7:return a=t.sent[0],t.next=10,this.program.account.stakeAccountMetadataV2.fetch(a);case 10:return s=t.sent,c=O.serializeVesting(s.lock,this.program.idl),t.next=14,g.PublicKey.findProgramAddress([f.utils.bytes.utf8.encode(M.Constants.CUSTODY_SEED()),e.toBuffer()],this.program.programId);case 14:return u=t.sent[0],t.next=17,g.PublicKey.findProgramAddress([f.utils.bytes.utf8.encode(M.Constants.AUTHORITY_SEED()),e.toBuffer()],this.program.programId);case 17:return d=t.sent[0],l=new m.Token(this.program.provider.connection,this.config.pythTokenMint,m.TOKEN_PROGRAM_ID,new g.Keypair),t.next=21,this.fetchVotingProductMetadataAccount();case 21:return _=t.sent,t.next=24,l.getAccountInfo(u);case 24:return p=t.sent.amount,t.next=27,l.getMintInfo();case 27:return h=t.sent.supply,t.abrupt("return",new O(e,r,i,s,p,d,c,_,h,this.config));case 29:case"end":return t.stop()}}),t,this)})))}},{key:"getTime",value:function(){return _(this,void 0,void 0,o.mark((function e(){var t,n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.freeze){e.next=7;break}return e.next=3,this.program.account.globalConfig.fetch(this.configAddress);case 3:return t=e.sent,e.abrupt("return",t.mockClockTime);case 7:return e.next=9,this.program.provider.connection.getAccountInfo(g.SYSVAR_CLOCK_PUBKEY);case 9:return n=e.sent,e.abrupt("return",new y.default(M.getUnixTime(n.data).toString()));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"unlockTokens",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){var r;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,this.getTime();case 3:if(n.t1=n.sent,r=n.t0.getBalanceSummary.call(n.t0,n.t1).locked,!t.toBN().gt(r.locked.toBN().add(r.locking.toBN()))){n.next=7;break}throw new Error("Amount greater than locked amount.");case 7:return n.next=9,this.unlockTokensUnchecked(e,t);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"unlockTokensUnchecked",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){var r,i,a,s,c,u,d,l,_,p=this;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.stakeAccountPositionsJs.positions,n.next=3,this.getTime();case 3:for(i=n.sent,a=i.div(this.config.epochDuration),s=r.map((function(e,t){return{index:t,value:e}})).filter((function(e){return e.value})).filter((function(t){return e.stakeAccountPositionsWasm.isPositionVoting(t.index)})).filter((function(t){return[M.PositionState.LOCKED,M.PositionState.LOCKING].includes(e.stakeAccountPositionsWasm.getPositionState(t.index,BigInt(a.toString()),p.config.unlockingDuration))})).sort((function(e,t){return e.value.activationEpoch.gt(t.value.activationEpoch)?1:-1})),c=t.toBN(),u=0,d=[];c.gt(new y.default(0))&&u<s.length;)s[u].value.amount.gte(c)?(d.push({index:s[u].index,amount:c}),c=new y.default(0)):(d.push({index:s[u].index,amount:s[u].value.amount}),c=c.sub(s[u].value.amount)),u++;return n.next=12,Promise.all(d.map((function(t){return p.program.methods.closePosition(t.index,t.amount,p.votingProduct).accounts({targetAccount:p.votingProductMetadataAccount,stakeAccountPositions:e.address}).instruction()})));case 12:return l=n.sent,n.next=15,(0,w.batchInstructions)(l,this.program.provider);case 15:return _=n.sent,n.next=18,this.program.provider.sendAll(_.map((function(e){return{tx:e,signers:[]}})));case 18:case"end":return n.stop()}}),n,this)})))}},{key:"withUpdateVoterWeight",value:function(e,t,n,r){return _(this,void 0,void 0,o.mark((function i(){var a;return o.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=this.program.methods.updateVoterWeight(n).accounts({stakeAccountPositions:t.address}).remainingAccounts(r?[{pubkey:r,isWritable:!1,isSigner:!1}]:[]),i.t0=e,i.next=4,a.instruction();case 4:return i.t1=i.sent,i.t0.push.call(i.t0,i.t1),i.next=8,a.pubkeys();case 8:return i.t2=i.sent.voterRecord,i.next=11,this.program.methods.updateMaxVoterWeight().pubkeys();case 11:return i.t3=i.sent.maxVoterRecord,i.abrupt("return",{voterWeightAccount:i.t2,maxVoterWeightRecord:i.t3});case 13:case"end":return i.stop()}}),i,this)})))}},{key:"withCreateAccount",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fullyVested:{}};return _(this,void 0,void 0,o.mark((function r(){var i;return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=new g.Keypair,r.t0=e,r.next=4,this.program.account.positionData.createInstruction(i,M.Constants.POSITIONS_ACCOUNT_SIZE());case 4:return r.t1=r.sent,r.t0.push.call(r.t0,r.t1),r.t2=e,r.next=9,this.program.methods.createStakeAccount(t,n).accounts({stakeAccountPositions:i.publicKey,mint:this.config.pythTokenMint}).signers([i]).instruction();case 9:return r.t3=r.sent,r.t2.push.call(r.t2,r.t3),r.abrupt("return",i);case 12:case"end":return r.stop()}}),r,this)})))}},{key:"isLlcMember",value:function(e){return _(this,void 0,void 0,o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",JSON.stringify(e.stakeAccountMetadata.signedAgreementHash)==JSON.stringify(this.config.agreementHash));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"withJoinDaoLlc",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,this.program.methods.joinDaoLlc(this.config.agreementHash).accounts({stakeAccountPositions:t}).instruction();case 3:n.t1=n.sent,n.t0.push.call(n.t0,n.t1);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"buildCloseInstruction",value:function(e,t,n){return _(this,void 0,void 0,o.mark((function r(){return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.program.methods.closePosition(t,n,this.votingProduct).accounts({targetAccount:this.votingProductMetadataAccount,stakeAccountPositions:e}).instruction();case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"buildTransferInstruction",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){var r,i,a;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.Token.getAssociatedTokenAddress(m.ASSOCIATED_TOKEN_PROGRAM_ID,m.TOKEN_PROGRAM_ID,this.config.pythTokenMint,this.provider.wallet.publicKey,!0);case 2:return r=n.sent,n.next=5,g.PublicKey.findProgramAddress([f.utils.bytes.utf8.encode(M.Constants.CUSTODY_SEED()),e.toBuffer()],this.program.programId);case 5:return i=n.sent[0],a=m.Token.createTransferInstruction(m.TOKEN_PROGRAM_ID,r,i,this.provider.wallet.publicKey,[],new m.u64(t.toString())),n.abrupt("return",a);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"hasGovernanceRecord",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.program.provider.connection,t.next=3,this.getTokenOwnerRecordAddress(e);case 3:return t.t1=t.sent,t.next=6,t.t0.getAccountInfo.call(t.t0,t.t1);case 6:return n=t.sent,t.abrupt("return",Boolean(n));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"lockAllUnvested",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,this.getTime();case 3:if(t.t1=t.sent,(n=t.t0.getVestingAccountState.call(t.t0,t.t1))==C.UnvestedTokensPartiallyLocked||n==C.UnvestedTokensFullyUnlocked){t.next=7;break}throw Error("Unexpected account state ".concat(n));case 7:return t.t2=e,t.next=10,this.getTime();case 10:return t.t3=t.sent,r=t.t2.getBalanceSummary.call(t.t2,t.t3),t.next=14,this.lockTokens(e,r.unvested.unlocked);case 14:case"end":return t.stop()}}),t,this)})))}},{key:"lockTokens",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){var r,i,a;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.stakeAccountMetadata.owner,i=t.toBN(),a=new g.Transaction,n.next=5,this.hasGovernanceRecord(r);case 5:if(n.sent){n.next=8;break}return n.next=8,(0,A.withCreateTokenOwnerRecord)(a.instructions,this.governanceAddress,A.PROGRAM_VERSION_V2,this.config.pythGovernanceRealm,r,this.config.pythTokenMint,r);case 8:return n.next=10,this.isLlcMember(e);case 10:if(n.sent){n.next=13;break}return n.next=13,this.withJoinDaoLlc(a.instructions,e.address);case 13:return n.t0=a.instructions,n.next=16,this.program.methods.createPosition(this.votingProduct,i).accounts({stakeAccountPositions:e.address,targetAccount:this.votingProductMetadataAccount}).instruction();case 16:return n.t1=n.sent,n.t0.push.call(n.t0,n.t1),n.next=20,this.provider.sendAndConfirm(a);case 20:case"end":return n.stop()}}),n,this)})))}},{key:"setupVestingAccount",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return _(this,void 0,void 0,o.mark((function i(){var a,s;return o.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=new g.Transaction,n.periodicVestingAfterListing?((0,P.default)(n.periodicVestingAfterListing.initialBalance),(0,P.default)(n.periodicVestingAfterListing.initialBalance.lte(e.toBN()))):n.periodicVesting&&((0,P.default)(n.periodicVesting.initialBalance),(0,P.default)(n.periodicVesting.initialBalance.lte(e.toBN()))),i.next=4,this.withCreateAccount(a.instructions,t,n);case 4:if(s=i.sent,!r){i.next=11;break}return i.t0=a.instructions,i.next=9,this.buildTransferInstruction(s.publicKey,e.toBN());case 9:i.t1=i.sent,i.t0.push.call(i.t0,i.t1);case 11:return i.next=13,this.provider.sendAndConfirm(a,[s]);case 13:case"end":return i.stop()}}),i,this)})))}},{key:"depositTokens",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){var r,i,a,s,c,u;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.provider.wallet.publicKey,a=[],s=[],e){n.next=11;break}return n.next=6,this.withCreateAccount(a,i);case 6:c=n.sent,s.push(c),r=c.publicKey,n.next=12;break;case 11:r=e.address;case 12:return n.next=14,this.hasGovernanceRecord(i);case 14:if(n.sent){n.next=17;break}return n.next=17,(0,A.withCreateTokenOwnerRecord)(a,this.governanceAddress,A.PROGRAM_VERSION_V2,this.config.pythGovernanceRealm,i,this.config.pythTokenMint,i);case 17:if(n.t0=!e,n.t0){n.next=22;break}return n.next=21,this.isLlcMember(e);case 21:n.t0=!n.sent;case 22:if(!n.t0){n.next=25;break}return n.next=25,this.withJoinDaoLlc(a,r);case 25:return n.t1=a,n.next=28,this.buildTransferInstruction(r,t.toBN());case 28:return n.t2=n.sent,n.t1.push.call(n.t1,n.t2),(u=new g.Transaction).add.apply(u,a),n.next=34,this.provider.sendAndConfirm(u,s);case 34:case"end":return n.stop()}}),n,this)})))}},{key:"getTokenOwnerRecordAddress",value:function(e){return _(this,void 0,void 0,o.mark((function t(){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,A.getTokenOwnerRecordAddress)(this.governanceAddress,this.config.pythGovernanceRealm,this.config.pythTokenMint,e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"unlockBeforeVestingEvent",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r,i;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,this.getTime();case 3:if(t.t1=t.sent,(n=t.t0.getVestingAccountState.call(t.t0,t.t1))==C.UnvestedTokensFullyLocked){t.next=7;break}throw Error("Unexpected account state ".concat(n));case 7:return t.t2=e,t.next=10,this.getTime();case 10:return t.t3=t.sent,r=t.t2.getNetExcessGovernanceAtVesting.call(t.t2,t.t3),i=new S.PythBalance(r),t.next=15,this.unlockTokensUnchecked(e,i);case 15:case"end":return t.stop()}}),t,this)})))}},{key:"unlockAll",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r,i,a;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,this.getTime();case 3:if(t.t1=t.sent,(n=t.t0.getVestingAccountState.call(t.t0,t.t1))==C.UnvestedTokensFullyLocked||n==C.UnvestedTokensPartiallyLocked||n==C.UnvestedTokensFullyLockedExceptCooldown){t.next=7;break}throw Error("Unexpected account state ".concat(n));case 7:return t.t2=e,t.next=10,this.getTime();case 10:return t.t3=t.sent,r=t.t2.getBalanceSummary.call(t.t2,t.t3),i=r.locked.locked.toBN().add(r.locked.locking.toBN()).add(r.unvested.locked.toBN()).add(r.unvested.locking.toBN()),a=new S.PythBalance(i),t.next=16,this.unlockTokensUnchecked(e,a);case 16:case"end":return t.stop()}}),t,this)})))}},{key:"depositAndLockTokens",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){var r,i,s,c,u,d;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.provider.wallet.publicKey,s=[],c=[],e){n.next=11;break}return n.next=6,this.withCreateAccount(s,i);case 6:u=n.sent,c.push(u),r=u.publicKey,n.next=19;break;case 11:return r=e.address,n.t0=e,n.next=15,this.getTime();case 15:if(n.t1=n.sent,(d=n.t0.getVestingAccountState.call(n.t0,n.t1))==C.UnvestedTokensFullyLocked||d==C.FullyVested){n.next=19;break}throw Error("Unexpected account state ".concat(d));case 19:return n.next=21,this.hasGovernanceRecord(i);case 21:if(n.sent){n.next=24;break}return n.next=24,(0,A.withCreateTokenOwnerRecord)(s,this.governanceAddress,A.PROGRAM_VERSION_V2,this.config.pythGovernanceRealm,i,this.config.pythTokenMint,i);case 24:if(n.t2=!e,n.t2){n.next=29;break}return n.next=28,this.isLlcMember(e);case 28:n.t2=!n.sent;case 29:if(!n.t2){n.next=32;break}return n.next=32,this.withJoinDaoLlc(s,r);case 32:return n.t3=s,n.next=35,this.buildTransferInstruction(r,t.toBN());case 35:if(n.t4=n.sent,n.t3.push.call(n.t3,n.t4),!e){n.next=46;break}return n.t5=s.push,n.t6=s,n.t7=a,n.next=43,this.buildCleanupUnlockedPositions(e);case 43:n.t8=n.sent,n.t9=(0,n.t7)(n.t8),n.t5.apply.call(n.t5,n.t6,n.t9);case 46:return n.next=48,this.program.methods.createPosition(this.votingProduct,t.toBN()).preInstructions(s).accounts({stakeAccountPositions:r,targetAccount:this.votingProductMetadataAccount}).signers(c).rpc({skipPreflight:!0});case 48:case"end":return n.stop()}}),n,this)})))}},{key:"buildCleanupUnlockedPositions",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r,i,a=this;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTime();case 2:return n=t.sent,r=n.div(this.config.epochDuration),i=e.stakeAccountPositionsJs.positions.map((function(e,t){return{index:t,value:e}})).filter((function(e){return e.value})).filter((function(t){return e.stakeAccountPositionsWasm.isPositionVoting(t.index)})).filter((function(t){return e.stakeAccountPositionsWasm.getPositionState(t.index,BigInt(r.toString()),a.config.unlockingDuration)===M.PositionState.UNLOCKED})).reverse(),t.next=7,Promise.all(i.map((function(t){return a.buildCloseInstruction(e.address,t.index,t.value.amount)})));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"withdrawTokens",value:function(e,t){return _(this,void 0,void 0,o.mark((function n(){var r,i;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=t.toBN(),n.t1=e,n.next=4,this.getTime();case 4:if(n.t2=n.sent,n.t3=n.t1.getBalanceSummary.call(n.t1,n.t2).withdrawable.toBN(),!n.t0.gt.call(n.t0,n.t3)){n.next=8;break}throw new Error("Amount exceeds withdrawable.");case 8:return n.next=10,m.Token.getAssociatedTokenAddress(m.ASSOCIATED_TOKEN_PROGRAM_ID,m.TOKEN_PROGRAM_ID,this.config.pythTokenMint,this.provider.wallet.publicKey,!0);case 10:return r=n.sent,i=[],n.next=14,this.provider.connection.getAccountInfo(r);case 14:if(n.t4=n.sent,null!=n.t4){n.next=17;break}i.push(m.Token.createAssociatedTokenAccountInstruction(m.ASSOCIATED_TOKEN_PROGRAM_ID,m.TOKEN_PROGRAM_ID,this.config.pythTokenMint,r,this.provider.wallet.publicKey,this.provider.wallet.publicKey));case 17:return n.next=19,this.program.methods.withdrawStake(t.toBN()).preInstructions(i).accounts({stakeAccountPositions:e.address,destination:r}).rpc();case 19:case"end":return n.stop()}}),n,this)})))}},{key:"requestSplit",value:function(e,t,n){return _(this,void 0,void 0,o.mark((function r(){var i;return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[g.ComputeBudgetProgram.setComputeUnitLimit({units:3e4}),g.ComputeBudgetProgram.setComputeUnitPrice({microLamports:30101})],r.next=3,this.program.methods.requestSplit(t.toBN(),n).preInstructions(i).accounts({stakeAccountPositions:e.address}).rpc();case 3:case"end":return r.stop()}}),r,this)})))}},{key:"getSplitRequest",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g.PublicKey.findProgramAddressSync([f.utils.bytes.utf8.encode(M.Constants.SPLIT_REQUEST()),e.address.toBuffer()],this.program.programId)[0],t.next=3,this.program.account.splitRequest.fetchNullable(n);case 3:if(!(r=t.sent)){t.next=8;break}return t.abrupt("return",{balance:new S.PythBalance(r.amount),recipient:r.recipient});case 8:return t.abrupt("return",void 0);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"acceptSplit",value:function(e,t,n){return _(this,void 0,void 0,o.mark((function r(){var i,a,s;return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[g.ComputeBudgetProgram.setComputeUnitLimit({units:12e4}),g.ComputeBudgetProgram.setComputeUnitPrice({microLamports:30101})],a=E.randomBytes(16).toString("hex"),r.next=4,g.PublicKey.createWithSeed(this.userPublicKey(),a,this.program.programId);case 4:return s=r.sent,r.t0=i,r.t1=g.SystemProgram,r.t2=this.userPublicKey(),r.t3=s,r.t4=this.userPublicKey(),r.t5=a,r.next=13,this.program.provider.connection.getMinimumBalanceForRentExemption(M.Constants.POSITIONS_ACCOUNT_SIZE());case 13:return r.t6=r.sent,r.t7=M.Constants.POSITIONS_ACCOUNT_SIZE(),r.t8=this.program.programId,r.t9={fromPubkey:r.t2,newAccountPubkey:r.t3,basePubkey:r.t4,seed:r.t5,lamports:r.t6,space:r.t7,programId:r.t8},r.t10=r.t1.createAccountWithSeed.call(r.t1,r.t9),r.t0.push.call(r.t0,r.t10),r.next=21,this.program.methods.acceptSplit(t.toBN(),n).accounts({sourceStakeAccountPositions:e.address,newStakeAccountPositions:s,mint:this.config.pythTokenMint}).signers([]).preInstructions(i).rpc();case 21:case"end":return r.stop()}}),r,this)})))}},{key:"getScalingFactor",value:function(){var e=new y.default(Date.now()/1e3).div(this.config.epochDuration);return Number(this.votingAccountMetadataWasm.getCurrentAmountLocked(BigInt(e.toString())))/Number(M.Constants.MAX_VOTER_WEIGHT())}},{key:"testWallet",value:function(){return _(this,void 0,void 0,o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new f.Program(b,T.WALLET_TESTER_ADDRESS,this.provider),e.next=3,t.methods.test().rpc();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"walletHasTested",value:function(e){return _(this,void 0,void 0,o.mark((function t(){var n,r;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=g.PublicKey.findProgramAddressSync([e.toBytes()],T.WALLET_TESTER_ADDRESS)[0],t.next=3,this.provider.connection.getAccountInfo(n);case 3:return r=t.sent,t.abrupt("return",null!==r);case 5:case"end":return t.stop()}}),t,this)})))}}],[{key:"connect",value:function(t,n){return _(this,void 0,void 0,o.mark((function r(){return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.createStakeConnection(t,n,T.STAKING_ADDRESS);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))}},{key:"createStakeConnection",value:function(n,r,i){return _(this,void 0,void 0,o.mark((function a(){var s,c,u,d,l,_,p;return o.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=new f.AnchorProvider(n,r,{}),c=new f.Program(k.default,i,s),!M.hasOwnProperty("default")){a.next=6;break}return a.next=5,M.default;case 5:t.wasm=M=a.sent;case 6:return a.next=8,g.PublicKey.findProgramAddress([f.utils.bytes.utf8.encode(M.Constants.CONFIG_SEED())],c.programId);case 8:return u=a.sent[0],a.next=11,c.account.globalConfig.fetch(u);case 11:return d=a.sent,a.next=14,g.PublicKey.findProgramAddress([f.utils.bytes.utf8.encode(M.Constants.TARGET_SEED()),f.utils.bytes.utf8.encode(M.Constants.VOTING_TARGET_SEED())],c.programId);case 14:return l=a.sent[0],a.next=17,c.provider.connection.getAccountInfo(l);case 17:return _=a.sent,p=new M.WasmTargetMetadata(_.data),a.abrupt("return",new e(c,s,d,u,l,p));case 20:case"end":return a.stop()}}),a)})))}}]),e}();t.StakeConnection=I,function(e){e[e.FullyVested=0]="FullyVested",e[e.UnvestedTokensFullyLocked=1]="UnvestedTokensFullyLocked",e[e.UnvestedTokensFullyLockedExceptCooldown=2]="UnvestedTokensFullyLockedExceptCooldown",e[e.UnvestedTokensPartiallyLocked=3]="UnvestedTokensPartiallyLocked",e[e.UnvestedTokensFullyUnlockedExceptCooldown=4]="UnvestedTokensFullyUnlockedExceptCooldown",e[e.UnvestedTokensFullyUnlocked=5]="UnvestedTokensFullyUnlocked"}(C=t.VestingAccountState||(t.VestingAccountState={}));var O=function(){function e(t,n,r,i,a,o,c,u,d,l){s(this,e),this.address=t,this.stakeAccountPositionsWasm=n,this.stakeAccountPositionsJs=r,this.stakeAccountMetadata=i,this.tokenBalance=a,this.authorityAddress=o,this.vestingSchedule=c,this.votingAccountMetadataWasm=u,this.totalSupply=d,this.config=l}return c(e,[{key:"getBalanceSummary",value:function(e){var t,n=M.getUnvestedBalance(this.vestingSchedule,BigInt(e.toString()),this.config.pythTokenListTime?BigInt(this.config.pythTokenListTime.toString()):void 0),r=e.div(this.config.epochDuration),a=this.config.unlockingDuration,o=BigInt(r.toString());try{t=this.stakeAccountPositionsWasm.getWithdrawable(BigInt(this.tokenBalance.toString()),n,o,a)}catch(I){throw Error("This account has less tokens than the unlocking schedule or your staking position requires. Please contact support.")}var s,c,u,d,l=new y.default(t.toString()),_=new y.default(n.toString()),p=this.stakeAccountPositionsWasm.getLockedBalanceSummary(o,a),f=new y.default(p.locking.toString()),g=new y.default(p.locked.toString()),h=new y.default(p.preunlocking.toString()),m=new y.default(p.unlocking.toString()),v=f.add(g).add(h).add(m).add(l).add(_).sub(this.tokenBalance),k=this.adjustLockedAmount(v,g),b=i(k,3);v=b[0],g=b[1],s=b[2];var w=this.adjustLockedAmount(v,f),A=i(w,3);v=A[0],f=A[1],c=A[2];var T=this.adjustLockedAmount(v,h),x=i(T,3);v=x[0],h=x[1],u=x[2];var E=this.adjustLockedAmount(v,m),C=i(E,3);return v=C[0],m=C[1],d=C[2],(0,P.default)(f.add(g).add(h).add(m).add(l).add(_).eq(this.tokenBalance)),{withdrawable:new S.PythBalance(l),locked:{locking:new S.PythBalance(f),locked:new S.PythBalance(g),unlocking:new S.PythBalance(m),preunlocking:new S.PythBalance(h)},unvested:{total:new S.PythBalance(_),locked:new S.PythBalance(s),locking:new S.PythBalance(c),unlocking:new S.PythBalance(d),preunlocking:new S.PythBalance(u),unlocked:new S.PythBalance(_.sub(s).sub(c).sub(d).sub(u))}}}},{key:"adjustLockedAmount",value:function(e,t){return e.gt(new y.default(0))?e.gte(t)?[e.sub(t),new y.default(0),t]:[new y.default(0),t.sub(e),e]:[new y.default(0),t,new y.default(0)]}},{key:"getVoterWeight",value:function(e){var t=e.div(this.config.epochDuration),n=this.config.unlockingDuration,r=this.stakeAccountPositionsWasm.getVoterWeight(BigInt(t.toString()),n,BigInt(this.votingAccountMetadataWasm.getCurrentAmountLocked(BigInt(t.toString()))));return new S.PythBalance(new y.default(r.toString()))}},{key:"getNextVesting",value:function(e){return M.getNextVesting(this.vestingSchedule,BigInt(e.toString()),this.config.pythTokenListTime?BigInt(this.config.pythTokenListTime.toString()):void 0)}},{key:"getVestingAccountState",value:function(e){var t=this.getBalanceSummary(e).unvested;return t.total.isZero()?C.FullyVested:t.preunlocking.isZero()&&t.unlocking.isZero()?t.locked.isZero()&&t.locking.isZero()?C.UnvestedTokensFullyUnlocked:t.unlocked.isZero()?C.UnvestedTokensFullyLocked:C.UnvestedTokensPartiallyLocked:t.locked.isZero()&&t.locking.isZero()?C.UnvestedTokensFullyUnlockedExceptCooldown:t.unlocked.isZero()?C.UnvestedTokensFullyLockedExceptCooldown:C.UnvestedTokensPartiallyLocked}},{key:"addUnlockingPeriod",value:function(e){return e.add(this.config.epochDuration.mul(new y.default(this.config.unlockingDuration).add(new y.default(1))))}},{key:"getNetExcessGovernanceAtVesting",value:function(e){var t=this.getNextVesting(e);if(!t)return new y.default(0);var n=new y.default(t.time.toString()),r=y.default.max(n,this.addUnlockingPeriod(e)),i=this.getBalanceSummary(r).locked;return i.locking.toBN().add(i.locked.toBN())}}],[{key:"serializeVesting",value:function(e,t){var n,i=r.alloc(33),a=null===(n=null===t||void 0===t?void 0:t.types)||void 0===n?void 0:n.find((function(e){return"VestingSchedule"===e.name})),o=v.IdlCoder.typeDefLayout(a,t.types).encode(e,i,0);return i.slice(0,o)}}]),e}();t.StakeAccount=O},"../staking/lib/app/constants.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EPOCH_DURATION=t.REALM_ID=t.WALLET_TESTER_ADDRESS=t.STAKING_ADDRESS=t.GOVERNANCE_ADDRESS=void 0;var r=n("../node_modules/@solana/web3.js/lib/index.browser.esm.js");t.GOVERNANCE_ADDRESS=function(){return new r.PublicKey("pytGY6tWRgGinSCvRLnSv4fHfBTMoiDGiCsesmHWM6U")},t.STAKING_ADDRESS=new r.PublicKey("pytS9TjG1qyAZypk7n8rw8gfW9sUaqqYyMhJQ4E7JCQ"),t.WALLET_TESTER_ADDRESS=new r.PublicKey("tstPARXbQ5yxVkRU2UcZRbYphzbUEW6t5ihzpLaafgz"),t.REALM_ID=new r.PublicKey("4ct8XU5tKbMNRphWy4rePsS9kBqPhDdvZoGpmprPaug4"),t.EPOCH_DURATION=604800},"../staking/lib/app/index.js":function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.PythClient=t.PYTH_DECIMALS=t.PythBalance=t.VestingAccountState=t.StakeAccount=t.StakeConnection=void 0;var a=n("../staking/lib/app/StakeConnection.js");Object.defineProperty(t,"StakeConnection",{enumerable:!0,get:function(){return a.StakeConnection}});var o=n("../staking/lib/app/StakeConnection.js");Object.defineProperty(t,"StakeAccount",{enumerable:!0,get:function(){return o.StakeAccount}});var s=n("../staking/lib/app/StakeConnection.js");Object.defineProperty(t,"VestingAccountState",{enumerable:!0,get:function(){return s.VestingAccountState}});var c=n("../staking/lib/app/pythBalance.js");Object.defineProperty(t,"PythBalance",{enumerable:!0,get:function(){return c.PythBalance}});var u=n("../staking/lib/app/pythBalance.js");Object.defineProperty(t,"PYTH_DECIMALS",{enumerable:!0,get:function(){return u.PYTH_DECIMALS}});var d=n("../staking/lib/app/PythClient.js");Object.defineProperty(t,"PythClient",{enumerable:!0,get:function(){return d.PythClient}}),i(n("../staking/lib/app/constants.js"),t)},"../staking/lib/app/pythBalance.js":function(e,t,n){var r=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/classCallCheck.js"),i=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/createClass.js"),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythBalance=t.PYTH_DECIMALS=void 0;var o=a(n("../node_modules/bn.js/lib/bn.js"));t.PYTH_DECIMALS=6;var s=new RegExp(/^\d+$/),c=new RegExp("^\\d*\\.\\d{0,".concat(t.PYTH_DECIMALS,"}$")),u=new RegExp(/\.?0+$/),d=function(){function e(t){r(this,e),this.integerAmount=t}return i(e,[{key:"toNumber",value:function(){return this.integerAmount.toNumber()*Math.pow(10,-t.PYTH_DECIMALS)}},{key:"toString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.toBN().toString().padStart(t.PYTH_DECIMALS+1,"0"),r=n.slice(0,n.length-t.PYTH_DECIMALS);return(e?l(r):r)+("."+n.slice(n.length-t.PYTH_DECIMALS)).replace(u,"")}},{key:"toBN",value:function(){return this.integerAmount}},{key:"eq",value:function(e){return this.toBN().eq(e.toBN())}},{key:"gte",value:function(e){return this.toBN().gte(e.toBN())}},{key:"lt",value:function(e){return this.toBN().lt(e.toBN())}},{key:"gt",value:function(e){return this.toBN().gt(e.toBN())}},{key:"lte",value:function(e){return this.toBN().lte(e.toBN())}},{key:"add",value:function(t){return new e(t.toBN().add(this.toBN()))}},{key:"sub",value:function(t){return new e(this.toBN().sub(t.toBN()))}},{key:"isZero",value:function(){return this.eq(e.zero())}},{key:"min",value:function(e){return this.lt(e)?this:e}}],[{key:"zero",value:function(){return e.fromString("0")}},{key:"fromNumber",value:function(n){return new e(new o.default(n*Math.pow(10,t.PYTH_DECIMALS)))}},{key:"fromString",value:function(n){if((n=(n=(n=n.split(",").join("")).split('"').join("")).split(" ").join("")).match(s))return new e(new o.default(n).mul(new o.default(Math.pow(10,t.PYTH_DECIMALS))));if(n.match(c)){var r=n.split(".")[0],i=n.split(".")[1],a=i.length,u=new o.default(r).mul(new o.default(Math.pow(10,t.PYTH_DECIMALS)));return new e(u=u.add(new o.default(i).mul(new o.default(Math.pow(10,t.PYTH_DECIMALS-a)))))}throw new Error("Failed parsing")}}]),e}();t.PythBalance=d;var l=function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},"../staking/lib/app/transaction.js":function(e,t,n){var r=n("../node_modules/next/dist/compiled/@babel/runtime/regenerator/index.js"),i=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/toConsumableArray.js"),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.batchInstructions=void 0;var o=n("../node_modules/@solana/web3.js/lib/index.browser.esm.js");t.batchInstructions=function(e,t){return a(this,void 0,void 0,r.mark((function t(){var n,a,s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],a=0;a<e.length;a+=10)(s=new o.Transaction).add.apply(s,i(e.slice(a,a+10))),n.push(s);return t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})))}},"../wasm/bundle/staking.js":function(e,t,n){n.a(e,(async function(e,r){try{n.r(t),n.d(t,{Constants:function(){return i.gT},Hash:function(){return i.kb},Instruction:function(){return i.vr},Instructions:function(){return i.td},LockedBalanceSummary:function(){return i.BF},Message:function(){return i.v0},PositionState:function(){return i.Zu},Pubkey:function(){return i.Yb},SystemInstruction:function(){return i.vU},VestingEvent:function(){return i.ob},WasmPositionData:function(){return i.q3},WasmTargetMetadata:function(){return i.N1},__wbg_buffer_7af23f65f6c64548:function(){return i.EF},__wbg_call_ae78342adc33730a:function(){return i._3},__wbg_debug_fda1f49ea6af7a1d:function(){return i.Z1},__wbg_done_040f966faa9a72b3:function(){return i.Zn},__wbg_error_09919627ac0992f5:function(){return i.gk},__wbg_error_8ff19d586a987aef:function(){return i.pt},__wbg_get_a9cab131e3152c49:function(){return i.Rb},__wbg_info_c8f1b00be4ef10bc:function(){return i.g5},__wbg_instanceof_Uint8Array_edb92795fc0c63b4:function(){return i.Cp},__wbg_instruction_new:function(){return i.EL},__wbg_isArray_6721f2e508996340:function(){return i._8},__wbg_iterator_4832ef1f15b0382b:function(){return i.vz},__wbg_length_0acb1cf9bbaf8519:function(){return i.Oo},__wbg_log_e8ba7b992c7ad0eb:function(){return i.kq},__wbg_new_693216e109162396:function(){return i.Ih},__wbg_new_94fb1279cf6afea5:function(){return i.j1},__wbg_new_cc9018bd6f283b6f:function(){return i.cb},__wbg_newwithlength_e80fb11cf19c1628:function(){return i.Yr},__wbg_next_bf3d83fc18df496e:function(){return i.ID},__wbg_next_cabb70b365520721:function(){return i.Ge},__wbg_pubkey_new:function(){return i.bJ},__wbg_push_40c6a90f1805aa90:function(){return i.JX},__wbg_set_561aac756158708c:function(){return i.GW},__wbg_set_f25e869e4565d2a2:function(){return i.Ip},__wbg_stack_0ddaca5d1abfb52f:function(){return i.yq},__wbg_value_419afbd9b9574c4c:function(){return i.fg},__wbg_values_b1b9e8c63dbe01c2:function(){return i.PN},__wbg_warn_0227db1aa6989248:function(){return i.lX},__wbindgen_debug_string:function(){return i.fY},__wbindgen_is_function:function(){return i.o$},__wbindgen_is_object:function(){return i.Wl},__wbindgen_is_undefined:function(){return i.XP},__wbindgen_memory:function(){return i.oH},__wbindgen_number_get:function(){return i.M1},__wbindgen_number_new:function(){return i.pT},__wbindgen_object_drop_ref:function(){return i.ug},__wbindgen_string_get:function(){return i.qt},__wbindgen_string_new:function(){return i.h4},__wbindgen_throw:function(){return i.Or},getNextVesting:function(){return i.k9},getUnixTime:function(){return i.ZG},getUnvestedBalance:function(){return i.D2},init:function(){return i.S1}});var i=n("../wasm/bundle/staking_bg.js"),a=e([i]);i=(a.then?(await a)():a)[0],r()}catch(o){r(o)}}))},"../wasm/bundle/staking_bg.js":function(e,t,n){n.a(e,(async function(r,i){try{n.d(t,{BF:function(){return x},Cp:function(){return Re},D2:function(){return H},EF:function(){return Ie},EL:function(){return te},GW:function(){return xe},Ge:function(){return ve},ID:function(){return ke},Ih:function(){return pe},Ip:function(){return Ne},JX:function(){return Me},M1:function(){return ae},N1:function(){return N},Oo:function(){return De},Or:function(){return je},PN:function(){return Ce},Rb:function(){return Ae},S1:function(){return Q},Wl:function(){return ye},XP:function(){return oe},Yb:function(){return M},Yr:function(){return Pe},Z1:function(){return ce},ZG:function(){return Y},Zn:function(){return be},Zu:function(){return w},_3:function(){return Te},_8:function(){return Ee},bJ:function(){return ne},cb:function(){return Oe},fY:function(){return Be},fg:function(){return we},g5:function(){return de},gT:function(){return S},gk:function(){return ge},h4:function(){return ee},j1:function(){return he},k9:function(){return q},kb:function(){return A},kq:function(){return le},lX:function(){return _e},o$:function(){return me},oH:function(){return Le},ob:function(){return I},pT:function(){return se},pt:function(){return ue},q3:function(){return O},qt:function(){return re},td:function(){return P},ug:function(){return ie},v0:function(){return E},vU:function(){return C},vr:function(){return T},vz:function(){return Se},yq:function(){return fe}});var a=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../node_modules/next/dist/compiled/@babel/runtime/helpers/esm/createClass.js"),s=n("../wasm/bundle/staking_bg.wasm");e=n.hmd(e);var c=r([s]);s=(c.then?(await c)():c)[0];var u=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});u.decode();var d=null;function R(){return null!==d&&d.buffer===s.memory.buffer||(d=new Uint8Array(s.memory.buffer)),d}function B(e,t){return u.decode(R().subarray(e,e+t))}var l=new Array(32).fill(void 0);l.push(void 0,null,!0,!1);var _=l.length;function j(e){_===l.length&&l.push(l.length+1);var t=_;return _=l[t],l[t]=e,t}function L(e){return l[e]}var p=0,f=new("undefined"===typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8"),g="function"===typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){var n=f.encode(e);return t.set(n),{read:e.length,written:n.length}};function K(e,t,n){if(void 0===n){var r=f.encode(e),i=t(r.length);return R().subarray(i,i+r.length).set(r),p=r.length,i}for(var a=e.length,o=t(a),s=R(),c=0;c<a;c++){var u=e.charCodeAt(c);if(u>127)break;s[o+c]=u}if(c!==a){0!==c&&(e=e.slice(c)),o=n(o,a,a=c+3*e.length);var d=R().subarray(o+c,o+a);c+=g(e,d).written}return p=c,o}function U(e){return void 0===e||null===e}var h=null;function V(){return null!==h&&h.buffer===s.memory.buffer||(h=new Int32Array(s.memory.buffer)),h}function W(e){e<36||(l[e]=_,_=e)}function G(e){var t=L(e);return W(e),t}var m=null;function Z(e){var t=typeof e;if("number"==t||"boolean"==t||null==e)return"".concat(e);if("string"==t)return'"'.concat(e,'"');if("symbol"==t){var n=e.description;return null==n?"Symbol":"Symbol(".concat(n,")")}if("function"==t){var r=e.name;return"string"==typeof r&&r.length>0?"Function(".concat(r,")"):"Function"}if(Array.isArray(e)){var i=e.length,a="[";i>0&&(a+=Z(e[0]));for(var o=1;o<i;o++)a+=", "+Z(e[o]);return a+="]"}var s,c=/\[object ([^\]]+)\]/.exec(toString.call(e));if(!(c.length>1))return toString.call(e);if("Object"==(s=c[1]))try{return"Object("+JSON.stringify(e)+")"}catch(u){return"Object"}return e instanceof Error?"".concat(e.name,": ").concat(e.message,"\n").concat(e.stack):s}var y=new Uint32Array(2),v=new BigInt64Array(y.buffer),k=new BigUint64Array(y.buffer);function F(e,t){var n=t(1*e.length);return R().set(e,n/1),p=e.length,n}function q(e,t,n){try{var r=s.__wbindgen_add_to_stack_pointer(-16),i=F(e,s.__wbindgen_malloc),a=p;v[0]=t;var o=y[0],c=y[1];v[0]=U(n)?BigInt(0):n;var u=y[0],d=y[1];s.getNextVesting(r,i,a,o,c,!U(n),u,d);var l=V()[r/4+0],_=V()[r/4+1];if(V()[r/4+2])throw G(_);return 0===l?void 0:I.__wrap(l)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function H(e,t,n){try{var r=s.__wbindgen_add_to_stack_pointer(-16),i=F(e,s.__wbindgen_malloc),a=p;v[0]=t;var o=y[0],c=y[1];v[0]=U(n)?BigInt(0):n;var u=y[0],d=y[1];s.getUnvestedBalance(r,i,a,o,c,!U(n),u,d);var l=V()[r/4+0],_=V()[r/4+1],f=V()[r/4+2];if(V()[r/4+3])throw G(f);return y[0]=l,y[1]=_,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}}function Y(e){try{var t=s.__wbindgen_add_to_stack_pointer(-16),n=F(e,s.__wbindgen_malloc),r=p;s.getUnixTime(t,n,r);var i=V()[t/4+0],a=V()[t/4+1],o=V()[t/4+2];if(V()[t/4+3])throw G(o);return y[0]=i,y[1]=a,v[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}}function z(e,t){if(!(e instanceof t))throw new Error("expected instance of ".concat(t.name));return e.ptr}function J(e,t){return R().subarray(e/1,e/1+t)}var b=null;function X(e,t){for(var n=t(4*e.length),r=(null!==b&&b.buffer===s.memory.buffer||(b=new Uint32Array(s.memory.buffer)),b),i=0;i<e.length;i++)r[n/4+i]=j(e[i]);return p=e.length,n}function Q(){s.init()}function $(e,t){try{return e.apply(this,t)}catch(n){s.__wbindgen_exn_store(j(n))}}var w=Object.freeze({UNLOCKED:0,0:"UNLOCKED",LOCKING:1,1:"LOCKING",LOCKED:2,2:"LOCKED",PREUNLOCKING:3,3:"PREUNLOCKING",UNLOCKING:4,4:"UNLOCKING"}),S=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_constants_free(e)}}],[{key:"AUTHORITY_SEED",value:function(){return G(s.constants_AUTHORITY_SEED())}},{key:"CUSTODY_SEED",value:function(){return G(s.constants_CUSTODY_SEED())}},{key:"STAKE_ACCOUNT_METADATA_SEED",value:function(){return G(s.constants_STAKE_ACCOUNT_METADATA_SEED())}},{key:"CONFIG_SEED",value:function(){return G(s.constants_CONFIG_SEED())}},{key:"VOTER_RECORD_SEED",value:function(){return G(s.constants_VOTER_RECORD_SEED())}},{key:"TARGET_SEED",value:function(){return G(s.constants_TARGET_SEED())}},{key:"MAX_VOTER_RECORD_SEED",value:function(){return G(s.constants_MAX_VOTER_RECORD_SEED())}},{key:"VOTING_TARGET_SEED",value:function(){return G(s.constants_VOTING_TARGET_SEED())}},{key:"DATA_TARGET_SEED",value:function(){return G(s.constants_DATA_TARGET_SEED())}},{key:"SPLIT_REQUEST",value:function(){return G(s.constants_SPLIT_REQUEST())}},{key:"MAX_POSITIONS",value:function(){return s.constants_MAX_POSITIONS()>>>0}},{key:"POSITIONS_ACCOUNT_SIZE",value:function(){return s.constants_POSITIONS_ACCOUNT_SIZE()>>>0}},{key:"MAX_VOTER_WEIGHT",value:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.constants_MAX_VOTER_WEIGHT(e);var t=V()[e/4+0],n=V()[e/4+1];return y[0]=t,y[1]=n,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}}},{key:"POSITION_BUFFER_SIZE",value:function(){return s.constants_POSITION_BUFFER_SIZE()>>>0}}]),e}(),A=function(){function e(t){(0,a.Z)(this,e);try{var n=s.__wbindgen_add_to_stack_pointer(-16);s.hash_constructor(n,j(t));var r=V()[n/4+0],i=V()[n/4+1];if(V()[n/4+2])throw G(i);return e.__wrap(r)}finally{s.__wbindgen_add_to_stack_pointer(16)}}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_hash_free(e)}},{key:"toString",value:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.hash_toString(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return B(t,n)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_free(t,n)}}},{key:"equals",value:function(t){return z(t,e),0!==s.hash_equals(this.ptr,t.ptr)}},{key:"toBytes",value:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.hash_toBytes(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1],r=J(t,n).slice();return s.__wbindgen_free(t,1*n),r}finally{s.__wbindgen_add_to_stack_pointer(16)}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),T=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_instruction_free(e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),P=function(){function e(){(0,a.Z)(this,e);var t=s.instructions_constructor();return e.__wrap(t)}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_instructions_free(e)}},{key:"push",value:function(e){z(e,T);var t=e.ptr;e.ptr=0,s.instructions_push(this.ptr,t)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),x=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_lockedbalancesummary_free(e)}},{key:"locking",get:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.__wbg_get_lockedbalancesummary_locking(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return y[0]=t,y[1]=n,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}},set:function(e){k[0]=e;var t=y[0],n=y[1];s.__wbg_set_lockedbalancesummary_locking(this.ptr,t,n)}},{key:"locked",get:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.__wbg_get_lockedbalancesummary_locked(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return y[0]=t,y[1]=n,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}},set:function(e){k[0]=e;var t=y[0],n=y[1];s.__wbg_set_lockedbalancesummary_locked(this.ptr,t,n)}},{key:"unlocking",get:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.__wbg_get_lockedbalancesummary_unlocking(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return y[0]=t,y[1]=n,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}},set:function(e){k[0]=e;var t=y[0],n=y[1];s.__wbg_set_lockedbalancesummary_unlocking(this.ptr,t,n)}},{key:"preunlocking",get:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.__wbg_get_lockedbalancesummary_preunlocking(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return y[0]=t,y[1]=n,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}},set:function(e){k[0]=e;var t=y[0],n=y[1];s.__wbg_set_lockedbalancesummary_preunlocking(this.ptr,t,n)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),E=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_message_free(e)}},{key:"recent_blockhash",get:function(){var e=s.__wbg_get_message_recent_blockhash(this.ptr);return A.__wrap(e)},set:function(e){z(e,A);var t=e.ptr;e.ptr=0,s.__wbg_set_message_recent_blockhash(this.ptr,t)}}]),e}(),M=function(){function e(t){(0,a.Z)(this,e);try{var n=s.__wbindgen_add_to_stack_pointer(-16);s.pubkey_constructor(n,j(t));var r=V()[n/4+0],i=V()[n/4+1];if(V()[n/4+2])throw G(i);return e.__wrap(r)}finally{s.__wbindgen_add_to_stack_pointer(16)}}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_pubkey_free(e)}},{key:"toString",value:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.pubkey_toString(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return B(t,n)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_free(t,n)}}},{key:"isOnCurve",value:function(){return 0!==s.pubkey_isOnCurve(this.ptr)}},{key:"equals",value:function(t){return z(t,e),0!==s.pubkey_equals(this.ptr,t.ptr)}},{key:"toBytes",value:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.pubkey_toBytes(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1],r=J(t,n).slice();return s.__wbindgen_free(t,1*n),r}finally{s.__wbindgen_add_to_stack_pointer(16)}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"createWithSeed",value:function(t,n,r){try{var i=s.__wbindgen_add_to_stack_pointer(-16);z(t,e);var a=K(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=p;z(r,e),s.pubkey_createWithSeed(i,t.ptr,a,o,r.ptr);var c=V()[i/4+0],u=V()[i/4+1];if(V()[i/4+2])throw G(u);return e.__wrap(c)}finally{s.__wbindgen_add_to_stack_pointer(16)}}},{key:"createProgramAddress",value:function(t,n){try{var r=s.__wbindgen_add_to_stack_pointer(-16),i=X(t,s.__wbindgen_malloc),a=p;z(n,e),s.pubkey_createProgramAddress(r,i,a,n.ptr);var o=V()[r/4+0],c=V()[r/4+1];if(V()[r/4+2])throw G(c);return e.__wrap(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}},{key:"findProgramAddress",value:function(t,n){try{var r=s.__wbindgen_add_to_stack_pointer(-16),i=X(t,s.__wbindgen_malloc),a=p;z(n,e),s.pubkey_findProgramAddress(r,i,a,n.ptr);var o=V()[r/4+0],c=V()[r/4+1];if(V()[r/4+2])throw G(c);return G(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}}]),e}(),C=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_systeminstruction_free(e)}}],[{key:"createAccount",value:function(e,t,n,r,i){z(e,M),z(t,M),k[0]=n;var a=y[0],o=y[1];k[0]=r;var c=y[0],u=y[1];z(i,M);var d=s.systeminstruction_createAccount(e.ptr,t.ptr,a,o,c,u,i.ptr);return T.__wrap(d)}},{key:"createAccountWithSeed",value:function(e,t,n,r,i,a,o){z(e,M),z(t,M),z(n,M);var c=K(r,s.__wbindgen_malloc,s.__wbindgen_realloc),u=p;k[0]=i;var d=y[0],l=y[1];k[0]=a;var _=y[0],f=y[1];z(o,M);var g=s.systeminstruction_createAccountWithSeed(e.ptr,t.ptr,n.ptr,c,u,d,l,_,f,o.ptr);return T.__wrap(g)}},{key:"assign",value:function(e,t){z(e,M),z(t,M);var n=s.systeminstruction_assign(e.ptr,t.ptr);return T.__wrap(n)}},{key:"assignWithSeed",value:function(e,t,n,r){z(e,M),z(t,M);var i=K(n,s.__wbindgen_malloc,s.__wbindgen_realloc),a=p;z(r,M);var o=s.systeminstruction_assignWithSeed(e.ptr,t.ptr,i,a,r.ptr);return T.__wrap(o)}},{key:"transfer",value:function(e,t,n){z(e,M),z(t,M),k[0]=n;var r=y[0],i=y[1],a=s.systeminstruction_transfer(e.ptr,t.ptr,r,i);return T.__wrap(a)}},{key:"transferWithSeed",value:function(e,t,n,r,i,a){z(e,M),z(t,M);var o=K(n,s.__wbindgen_malloc,s.__wbindgen_realloc),c=p;z(r,M),z(i,M),k[0]=a;var u=y[0],d=y[1],l=s.systeminstruction_transferWithSeed(e.ptr,t.ptr,o,c,r.ptr,i.ptr,u,d);return T.__wrap(l)}},{key:"allocate",value:function(e,t){z(e,M),k[0]=t;var n=y[0],r=y[1],i=s.systeminstruction_allocate(e.ptr,n,r);return T.__wrap(i)}},{key:"allocateWithSeed",value:function(e,t,n,r,i){z(e,M),z(t,M);var a=K(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=p;k[0]=r;var c=y[0],u=y[1];z(i,M);var d=s.systeminstruction_allocateWithSeed(e.ptr,t.ptr,a,o,c,u,i.ptr);return T.__wrap(d)}},{key:"createNonceAccount",value:function(e,t,n,r){z(e,M),z(t,M),z(n,M),k[0]=r;var i=y[0],a=y[1];return G(s.systeminstruction_createNonceAccount(e.ptr,t.ptr,n.ptr,i,a))}},{key:"advanceNonceAccount",value:function(e,t){z(e,M),z(t,M);var n=s.systeminstruction_advanceNonceAccount(e.ptr,t.ptr);return T.__wrap(n)}},{key:"withdrawNonceAccount",value:function(e,t,n,r){z(e,M),z(t,M),z(n,M),k[0]=r;var i=y[0],a=y[1],o=s.systeminstruction_withdrawNonceAccount(e.ptr,t.ptr,n.ptr,i,a);return T.__wrap(o)}},{key:"authorizeNonceAccount",value:function(e,t,n){z(e,M),z(t,M),z(n,M);var r=s.systeminstruction_authorizeNonceAccount(e.ptr,t.ptr,n.ptr);return T.__wrap(r)}}]),e}(),I=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_vestingevent_free(e)}},{key:"time",get:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.__wbg_get_vestingevent_time(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return y[0]=t,y[1]=n,v[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}},set:function(e){v[0]=e;var t=y[0],n=y[1];s.__wbg_set_vestingevent_time(this.ptr,t,n)}},{key:"amount",get:function(){try{var e=s.__wbindgen_add_to_stack_pointer(-16);s.__wbg_get_vestingevent_amount(e,this.ptr);var t=V()[e/4+0],n=V()[e/4+1];return y[0]=t,y[1]=n,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}},set:function(e){k[0]=e;var t=y[0],n=y[1];s.__wbg_set_vestingevent_amount(this.ptr,t,n)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),O=function(){function e(t){(0,a.Z)(this,e);try{var n=s.__wbindgen_add_to_stack_pointer(-16),r=F(t,s.__wbindgen_malloc),i=p;s.wasmpositiondata_from_buffer(n,r,i);var o=V()[n/4+0],c=V()[n/4+1];if(V()[n/4+2])throw G(c);return e.__wrap(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_wasmpositiondata_free(e)}},{key:"getPositionState",value:function(e,t,n){try{var r=s.__wbindgen_add_to_stack_pointer(-16);k[0]=t;var i=y[0],a=y[1];s.wasmpositiondata_getPositionState(r,this.ptr,e,i,a,n);var o=V()[r/4+0],c=V()[r/4+1];if(V()[r/4+2])throw G(c);return o>>>0}finally{s.__wbindgen_add_to_stack_pointer(16)}}},{key:"isPositionVoting",value:function(e){try{var t=s.__wbindgen_add_to_stack_pointer(-16);s.wasmpositiondata_isPositionVoting(t,this.ptr,e);var n=V()[t/4+0],r=V()[t/4+1];if(V()[t/4+2])throw G(r);return 0!==n}finally{s.__wbindgen_add_to_stack_pointer(16)}}},{key:"getLockedBalanceSummary",value:function(e,t){try{var n=s.__wbindgen_add_to_stack_pointer(-16);k[0]=e;var r=y[0],i=y[1];s.wasmpositiondata_getLockedBalanceSummary(n,this.ptr,r,i,t);var a=V()[n/4+0],o=V()[n/4+1];if(V()[n/4+2])throw G(o);return x.__wrap(a)}finally{s.__wbindgen_add_to_stack_pointer(16)}}},{key:"getWithdrawable",value:function(e,t,n,r){try{var i=s.__wbindgen_add_to_stack_pointer(-16);k[0]=e;var a=y[0],o=y[1];k[0]=t;var c=y[0],u=y[1];k[0]=n;var d=y[0],l=y[1];s.wasmpositiondata_getWithdrawable(i,this.ptr,a,o,c,u,d,l,r);var _=V()[i/4+0],p=V()[i/4+1],f=V()[i/4+2];if(V()[i/4+3])throw G(f);return y[0]=_,y[1]=p,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}}},{key:"getVoterWeight",value:function(e,t,n){try{var r=s.__wbindgen_add_to_stack_pointer(-16);k[0]=e;var i=y[0],a=y[1];k[0]=n;var o=y[0],c=y[1];s.wasmpositiondata_getVoterWeight(r,this.ptr,i,a,t,o,c);var u=V()[r/4+0],d=V()[r/4+1],l=V()[r/4+2];if(V()[r/4+3])throw G(l);return y[0]=u,y[1]=d,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),N=function(){function e(t){(0,a.Z)(this,e);try{var n=s.__wbindgen_add_to_stack_pointer(-16),r=F(t,s.__wbindgen_malloc),i=p;s.wasmtargetmetadata_from_buffer(n,r,i);var o=V()[n/4+0],c=V()[n/4+1];if(V()[n/4+2])throw G(c);return e.__wrap(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}return(0,o.Z)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();s.__wbg_wasmtargetmetadata_free(e)}},{key:"getCurrentAmountLocked",value:function(e){try{var t=s.__wbindgen_add_to_stack_pointer(-16);k[0]=e;var n=y[0],r=y[1];s.wasmtargetmetadata_getCurrentAmountLocked(t,this.ptr,n,r);var i=V()[t/4+0],a=V()[t/4+1],o=V()[t/4+2];if(V()[t/4+3])throw G(o);return y[0]=i,y[1]=a,k[0]}finally{s.__wbindgen_add_to_stack_pointer(16)}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}();function ee(e,t){return j(B(e,t))}function te(e){return j(T.__wrap(e))}function ne(e){return j(M.__wrap(e))}function re(e,t){var n=L(t),r="string"===typeof n?n:void 0,i=U(r)?0:K(r,s.__wbindgen_malloc,s.__wbindgen_realloc),a=p;V()[e/4+1]=a,V()[e/4+0]=i}function ie(e){G(e)}function ae(e,t){var n=L(t),r="number"===typeof n?n:void 0;(null!==m&&m.buffer===s.memory.buffer||(m=new Float64Array(s.memory.buffer)),m)[e/8+1]=U(r)?0:r,V()[e/4+0]=!U(r)}function oe(e){return void 0===L(e)}function se(e){return j(e)}function ce(e){console.debug(L(e))}function ue(e){console.error(L(e))}function de(e){console.info(L(e))}function le(e){console.log(L(e))}function _e(e){console.warn(L(e))}function pe(){return j(new Error)}function fe(e,t){var n=K(L(t).stack,s.__wbindgen_malloc,s.__wbindgen_realloc),r=p;V()[e/4+1]=r,V()[e/4+0]=n}function ge(e,t){try{console.error(B(e,t))}finally{s.__wbindgen_free(e,t)}}function he(){return j(new Array)}function me(e){return"function"===typeof L(e)}function ye(e){var t=L(e);return"object"===typeof t&&null!==t}function ve(e){return j(L(e).next)}function ke(){return $((function(e){return j(L(e).next())}),arguments)}function be(e){return L(e).done}function we(e){return j(L(e).value)}function Se(){return j(Symbol.iterator)}function Ae(){return $((function(e,t){return j(Reflect.get(L(e),L(t)))}),arguments)}function Te(){return $((function(e,t){return j(L(e).call(L(t)))}),arguments)}function Pe(e){return j(new Array(e>>>0))}function xe(e,t,n){L(e)[t>>>0]=G(n)}function Ee(e){return Array.isArray(L(e))}function Me(e,t){return L(e).push(L(t))}function Ce(e){return j(L(e).values())}function Ie(e){return j(L(e).buffer)}function Oe(e){return j(new Uint8Array(L(e)))}function Ne(e,t,n){L(e).set(L(t),n>>>0)}function De(e){return L(e).length}function Re(e){return L(e)instanceof Uint8Array}function Be(e,t){var n=K(Z(L(t)),s.__wbindgen_malloc,s.__wbindgen_realloc),r=p;V()[e/4+1]=r,V()[e/4+0]=n}function je(e,t){throw new Error(B(e,t))}function Le(){return j(s.memory)}i()}catch(D){i(D)}}))},"../staking/lib/target/idl/staking.json":function(e){e.exports=JSON.parse('{"version":"1.0.0","name":"staking","instructions":[{"name":"initConfig","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"configAccount","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"globalConfig","type":{"defined":"GlobalConfig"}}]},{"name":"updateGovernanceAuthority","accounts":[{"name":"governanceSigner","isMut":false,"isSigner":true},{"name":"config","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}}],"args":[{"name":"newAuthority","type":"publicKey"}]},{"name":"updatePdaAuthority","accounts":[{"name":"governanceSigner","isMut":false,"isSigner":true},{"name":"config","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}}],"args":[{"name":"newAuthority","type":"publicKey"}]},{"name":"updateTokenListTime","accounts":[{"name":"governanceSigner","isMut":false,"isSigner":true},{"name":"config","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}}],"args":[{"name":"tokenListTime","type":{"option":"i64"}}]},{"name":"updateAgreementHash","accounts":[{"name":"governanceSigner","isMut":false,"isSigner":true},{"name":"config","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}}],"args":[{"name":"agreementHash","type":{"array":["u8",32]}}]},{"name":"createStakeAccount","docs":["Trustless instruction that creates a stake account for a user","The main account i.e. the position accounts needs to be initialized outside of the program","otherwise we run into stack limits"],"accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"stakeAccountPositions","isMut":true,"isSigner":false},{"name":"stakeAccountMetadata","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"stakeAccountCustody","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"custody"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"custodyAuthority","isMut":false,"isSigner":false,"docs":["CHECK : This AccountInfo is safe because it\'s a checked PDA"],"pda":{"seeds":[{"kind":"const","type":"string","value":"authority"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"voterRecord","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"voter_weight"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"mint","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"owner","type":"publicKey"},{"name":"lock","type":{"defined":"VestingSchedule"}}]},{"name":"createPosition","docs":["Creates a position","Looks for the first available place in the array, fails if array is full","Computes risk and fails if new positions exceed risk limit"],"accounts":[{"name":"payer","isMut":false,"isSigner":true},{"name":"stakeAccountPositions","isMut":true,"isSigner":false},{"name":"stakeAccountMetadata","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"stakeAccountCustody","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"custody"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"targetAccount","isMut":true,"isSigner":false}],"args":[{"name":"targetWithParameters","type":{"defined":"TargetWithParameters"}},{"name":"amount","type":"u64"}]},{"name":"closePosition","accounts":[{"name":"payer","isMut":false,"isSigner":true},{"name":"stakeAccountPositions","isMut":true,"isSigner":false},{"name":"stakeAccountMetadata","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"stakeAccountCustody","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"custody"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"targetAccount","isMut":true,"isSigner":false}],"args":[{"name":"index","type":"u8"},{"name":"amount","type":"u64"},{"name":"targetWithParameters","type":{"defined":"TargetWithParameters"}}]},{"name":"withdrawStake","accounts":[{"name":"payer","isMut":false,"isSigner":true},{"name":"destination","isMut":true,"isSigner":false},{"name":"stakeAccountPositions","isMut":false,"isSigner":false},{"name":"stakeAccountMetadata","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"stakeAccountCustody","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"custody"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"custodyAuthority","isMut":false,"isSigner":false,"docs":["CHECK : This AccountInfo is safe because it\'s a checked PDA"],"pda":{"seeds":[{"kind":"const","type":"string","value":"authority"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"updateVoterWeight","accounts":[{"name":"payer","isMut":false,"isSigner":true},{"name":"stakeAccountPositions","isMut":false,"isSigner":false},{"name":"stakeAccountMetadata","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"stakeAccountCustody","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"custody"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"voterRecord","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"voter_weight"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"governanceTarget","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"target"},{"kind":"const","type":"string","value":"voting"}]}}],"args":[{"name":"action","type":{"defined":"VoterWeightAction"}}]},{"name":"updateMaxVoterWeight","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"maxVoterRecord","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"max_voter"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"createTarget","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"governanceSigner","isMut":false,"isSigner":true},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"targetAccount","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"target","type":{"defined":"Target"}}]},{"name":"advanceClock","accounts":[{"name":"config","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}}],"args":[{"name":"seconds","type":"i64"}]},{"name":"requestSplit","docs":["* Any user of the staking program can request to split their account and\\n     * give a part of it to another user.\\n     * This is mostly useful to transfer unvested tokens. Each user can only have one active\\n     * request at a time.\\n     * In the first step, the user requests a split by specifying the `amount` of tokens\\n     * they want to give to the other user and the `recipient`\'s pubkey."],"accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"stakeAccountPositions","isMut":false,"isSigner":false},{"name":"stakeAccountMetadata","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"stakeAccountSplitRequest","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"split_request"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"recipient","type":"publicKey"}]},{"name":"acceptSplit","docs":["* A split request can only be accepted by the `pda_authority`` from\\n     * the config account. If accepted, `amount` tokens are transferred to a new stake account\\n     * owned by the `recipient` and the split request is reset (by setting `amount` to 0).\\n     * The recipient of a transfer can\'t vote during the epoch of the transfer.\\n     *\\n     * The `pda_authority` must explicitly approve both the amount of tokens and recipient, and\\n     * these parameters must match the request (in the `split_request` account)."],"accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"sourceStakeAccountPositions","isMut":true,"isSigner":false},{"name":"sourceStakeAccountMetadata","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"source_stake_account_positions"}]}},{"name":"sourceStakeAccountSplitRequest","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"split_request"},{"kind":"account","type":"publicKey","path":"source_stake_account_positions"}]}},{"name":"sourceStakeAccountCustody","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"custody"},{"kind":"account","type":"publicKey","path":"source_stake_account_positions"}]}},{"name":"sourceCustodyAuthority","isMut":false,"isSigner":false,"docs":["CHECK : This AccountInfo is safe because it\'s a checked PDA"],"pda":{"seeds":[{"kind":"const","type":"string","value":"authority"},{"kind":"account","type":"publicKey","path":"source_stake_account_positions"}]}},{"name":"newStakeAccountPositions","isMut":true,"isSigner":false},{"name":"newStakeAccountMetadata","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"new_stake_account_positions"}]}},{"name":"newStakeAccountCustody","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"custody"},{"kind":"account","type":"publicKey","path":"new_stake_account_positions"}]}},{"name":"newCustodyAuthority","isMut":false,"isSigner":false,"docs":["CHECK : This AccountInfo is safe because it\'s a checked PDA"],"pda":{"seeds":[{"kind":"const","type":"string","value":"authority"},{"kind":"account","type":"publicKey","path":"new_stake_account_positions"}]}},{"name":"newVoterRecord","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"voter_weight"},{"kind":"account","type":"publicKey","path":"new_stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}},{"name":"mint","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"recipient","type":"publicKey"}]},{"name":"joinDaoLlc","docs":["* Accept to join the DAO LLC\\n     * This must happen before create_position or update_voter_weight\\n     * The user signs a hash of the agreement and the program checks that the hash matches the agreement"],"accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"stakeAccountPositions","isMut":false,"isSigner":false},{"name":"stakeAccountMetadata","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"stake_metadata"},{"kind":"account","type":"publicKey","path":"stake_account_positions"}]}},{"name":"config","isMut":false,"isSigner":false,"pda":{"seeds":[{"kind":"const","type":"string","value":"config"}]}}],"args":[{"name":"agreementHash","type":{"array":["u8",32]}}]}],"accounts":[{"name":"GlobalConfig","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"governanceAuthority","type":"publicKey"},{"name":"pythTokenMint","type":"publicKey"},{"name":"pythGovernanceRealm","type":"publicKey"},{"name":"unlockingDuration","type":"u8"},{"name":"epochDuration","type":"u64"},{"name":"freeze","type":"bool"},{"name":"pdaAuthority","type":"publicKey"},{"name":"governanceProgram","type":"publicKey"},{"name":"pythTokenListTime","docs":["Once the pyth token is listed, governance can update the config to set this value.","Once this value is set, vesting schedules that depend on the token list date can start","vesting."],"type":{"option":"i64"}},{"name":"agreementHash","type":{"array":["u8",32]}},{"name":"mockClockTime","type":"i64"}]}},{"name":"MaxVoterWeightRecord","docs":["Copied this struct from https://github.com/solana-labs/solana-program-library/blob/master/governance/addin-api/src/max_voter_weight.rs"],"type":{"kind":"struct","fields":[{"name":"realm","docs":["The Realm the MaxVoterWeightRecord belongs to"],"type":"publicKey"},{"name":"governingTokenMint","docs":["Governing Token Mint the MaxVoterWeightRecord is associated with","Note: The addin can take deposits of any tokens and is not restricted to the community or","council tokens only"],"type":"publicKey"},{"name":"maxVoterWeight","docs":["Max voter weight","The max voter weight provided by the addin for the given realm and governing_token_mint"],"type":"u64"},{"name":"maxVoterWeightExpiry","docs":["The slot when the max voting weight expires","It should be set to None if the weight never expires","If the max vote weight decays with time, for example for time locked based weights, then","the expiry must be set As a pattern Revise instruction to update the max weight should","be invoked before governance instruction within the same transaction and the expiry set","to the current slot to provide up to date weight"],"type":{"option":"u64"}},{"name":"reserved","docs":["Reserved space for future versions"],"type":{"array":["u8",8]}}]}},{"name":"PositionData","docs":["An array that contains all of a user\'s positions i.e. where are the staking and who are they","staking to.","The invariant we preserve is : For i < next_index, positions[i] == Some","For i >= next_index, positions[i] == None"],"type":{"kind":"struct","fields":[{"name":"owner","type":"publicKey"},{"name":"positions","type":{"array":[{"array":["u8",200]},20]}}]}},{"name":"SplitRequest","type":{"kind":"struct","fields":[{"name":"amount","type":"u64"},{"name":"recipient","type":"publicKey"}]}},{"name":"StakeAccountMetadataV2","docs":["This is the metadata account for each staker","It is derived from the positions account with seeds \\"stake_metadata\\" and the positions account","pubkey It stores some PDA bumps, the owner of the account and the vesting schedule"],"type":{"kind":"struct","fields":[{"name":"metadataBump","type":"u8"},{"name":"custodyBump","type":"u8"},{"name":"authorityBump","type":"u8"},{"name":"voterBump","type":"u8"},{"name":"owner","type":"publicKey"},{"name":"lock","type":{"defined":"VestingSchedule"}},{"name":"nextIndex","type":"u8"},{"name":"transferEpoch","type":{"option":"u64"}},{"name":"signedAgreementHash","type":{"option":{"array":["u8",32]}}}]}},{"name":"TargetMetadata","docs":["This represents a target that users can stake to","Currently we store the last time the target account was updated, the current locked balance","and the amount by which the locked balance will change in the next epoch"],"type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"lastUpdateAt","type":"u64"},{"name":"prevEpochLocked","type":"u64"},{"name":"locked","type":"u64"},{"name":"deltaLocked","type":"i64"}]}},{"name":"VoterWeightRecord","docs":["Copied this struct from https://github.com/solana-labs/solana-program-library/blob/master/governance/addin-api/src/voter_weight.rs","Anchor has a macro (vote_weight_record) that is supposed to generate this struct, but it doesn\'t","work because the error\'s macros are not updated for anchor 0.22.0.","Even if it did work, the type wouldn\'t show up in the IDL. SPL doesn\'t produce an API, which","means that means we\'d need the equivalent of this code on the client side.","If Anchor fixes the macro, we might consider changing it"],"type":{"kind":"struct","fields":[{"name":"realm","docs":["VoterWeightRecord discriminator sha256(\\"account:VoterWeightRecord\\")[..8]","Note: The discriminator size must match the addin implementing program discriminator size","to ensure it\'s stored in the private space of the account data and it\'s unique","pub account_discriminator: [u8; 8],","The Realm the VoterWeightRecord belongs to"],"type":"publicKey"},{"name":"governingTokenMint","docs":["Governing Token Mint the VoterWeightRecord is associated with","Note: The addin can take deposits of any tokens and is not restricted to the community or","council tokens only"],"type":"publicKey"},{"name":"governingTokenOwner","docs":["The owner of the governing token and voter","This is the actual owner (voter) and corresponds to TokenOwnerRecord.governing_token_owner"],"type":"publicKey"},{"name":"voterWeight","docs":["Voter\'s weight","The weight of the voter provided by the addin for the given realm, governing_token_mint and","governing_token_owner (voter)"],"type":"u64"},{"name":"voterWeightExpiry","docs":["The slot when the voting weight expires","It should be set to None if the weight never expires","If the voter weight decays with time, for example for time locked based weights, then the","expiry must be set As a common pattern Revise instruction to update the weight should","be invoked before governance instruction within the same transaction and the expiry set","to the current slot to provide up to date weight"],"type":{"option":"u64"}},{"name":"weightAction","docs":["The governance action the voter\'s weight pertains to","It allows to provided voter\'s weight specific to the particular action the weight is","evaluated for When the action is provided then the governance program asserts the","executing action is the same as specified by the addin"],"type":{"option":{"defined":"VoterWeightAction"}}},{"name":"weightActionTarget","docs":["The target the voter\'s weight  action pertains to","It allows to provided voter\'s weight specific to the target the weight is evaluated for","For example when addin supplies weight to vote on a particular proposal then it must","specify the proposal as the action target When the target is provided then the","governance program asserts the target is the same as specified by the addin"],"type":{"option":"publicKey"}},{"name":"reserved","docs":["Reserved space for future versions"],"type":{"array":["u8",8]}}]}}],"types":[{"name":"Position","docs":["This represents a staking position, i.e. an amount that someone has staked to a particular","target. This is one of the core pieces of our staking design, and stores all","of the state related to a position The voting position is a position where the","target_with_parameters is VOTING"],"type":{"kind":"struct","fields":[{"name":"amount","type":"u64"},{"name":"activationEpoch","type":"u64"},{"name":"unlockingStart","type":{"option":"u64"}},{"name":"targetWithParameters","type":{"defined":"TargetWithParameters"}}]}},{"name":"Target","type":{"kind":"enum","variants":[{"name":"Voting"},{"name":"Staking","fields":[{"name":"product","type":"publicKey"}]}]}},{"name":"TargetWithParameters","type":{"kind":"enum","variants":[{"name":"Voting"},{"name":"Staking","fields":[{"name":"product","type":"publicKey"},{"name":"publisher","type":{"defined":"Publisher"}}]}]}},{"name":"Publisher","type":{"kind":"enum","variants":[{"name":"DEFAULT"},{"name":"SOME","fields":[{"name":"address","type":"publicKey"}]}]}},{"name":"PositionState","docs":["The core states that a position can be in"],"type":{"kind":"enum","variants":[{"name":"UNLOCKED"},{"name":"LOCKING"},{"name":"LOCKED"},{"name":"PREUNLOCKING"},{"name":"UNLOCKING"}]}},{"name":"VestingSchedule","docs":["Represents how a given initial balance vests over time","It is unit-less, but units must be consistent"],"type":{"kind":"enum","variants":[{"name":"FullyVested"},{"name":"PeriodicVesting","fields":[{"name":"initial_balance","type":"u64"},{"name":"start_date","type":"i64"},{"name":"period_duration","type":"u64"},{"name":"num_periods","type":"u64"}]},{"name":"PeriodicVestingAfterListing","fields":[{"name":"initial_balance","type":"u64"},{"name":"period_duration","type":"u64"},{"name":"num_periods","type":"u64"}]}]}},{"name":"VoterWeightAction","docs":["The governance action VoterWeight is evaluated for"],"type":{"kind":"enum","variants":[{"name":"CastVote"},{"name":"CommentProposal"},{"name":"CreateGovernance"},{"name":"CreateProposal"},{"name":"SignOffProposal"}]}}],"errors":[{"code":6000,"name":"TooMuchExposureToProduct","msg":"Too much exposure to product"},{"code":6001,"name":"TooMuchExposureToGovernance","msg":"Too much exposure to governance"},{"code":6002,"name":"TokensNotYetVested","msg":"Tokens not yet vested"},{"code":6003,"name":"RiskLimitExceeded","msg":"Risk limit exceeded"},{"code":6004,"name":"TooManyPositions","msg":"Number of position limit reached"},{"code":6005,"name":"PositionNotInUse","msg":"Position not in use"},{"code":6006,"name":"CreatePositionWithZero","msg":"New position needs to have positive balance"},{"code":6007,"name":"ClosePositionWithZero","msg":"Closing a position of 0 is not allowed"},{"code":6008,"name":"InvalidPosition","msg":"Invalid product/publisher pair"},{"code":6009,"name":"AmountBiggerThanPosition","msg":"Amount to unlock bigger than position"},{"code":6010,"name":"AlreadyUnlocking","msg":"Position already unlocking"},{"code":6011,"name":"ZeroEpochDuration","msg":"Epoch duration is 0"},{"code":6012,"name":"WithdrawToUnauthorizedAccount","msg":"Owner needs to own destination account"},{"code":6013,"name":"InsufficientWithdrawableBalance","msg":"Insufficient balance to cover the withdrawal"},{"code":6014,"name":"WrongTarget","msg":"Target in position doesn\'t match target in instruction data"},{"code":6015,"name":"GenericOverflow","msg":"An arithmetic operation unexpectedly overflowed"},{"code":6016,"name":"NegativeBalance","msg":"Locked balance must be positive"},{"code":6017,"name":"Frozen","msg":"Protocol is frozen"},{"code":6018,"name":"DebuggingOnly","msg":"Not allowed when not debugging"},{"code":6019,"name":"ProposalTooLong","msg":"Proposal too long"},{"code":6020,"name":"InvalidVotingEpoch","msg":"Voting epoch is either too old or hasn\'t started"},{"code":6021,"name":"ProposalNotActive","msg":"Voting hasn\'t started"},{"code":6022,"name":"NoRemainingAccount","msg":"Extra governance account required"},{"code":6023,"name":"Unauthorized","msg":"Unauthorized caller"},{"code":6024,"name":"AccountUpgradeFailed","msg":"Precondition to upgrade account violated"},{"code":6025,"name":"NotImplemented","msg":"Not implemented"},{"code":6026,"name":"PositionSerDe","msg":"Error deserializing position"},{"code":6027,"name":"PositionOutOfBounds","msg":"Position out of bounds"},{"code":6028,"name":"VoteDuringTransferEpoch","msg":"Can\'t vote during an account\'s transfer epoch"},{"code":6029,"name":"NotLlcMember","msg":"You need to be an LLC member to perform this action"},{"code":6030,"name":"InvalidLlcAgreement","msg":"Invalid LLC agreement"},{"code":6031,"name":"SplitZeroTokens","msg":"Can\'t split 0 tokens from an account"},{"code":6032,"name":"SplitTooManyTokens","msg":"Can\'t split more tokens than are in the account"},{"code":6033,"name":"SplitWithStake","msg":"Can\'t split a token account with staking positions. Unstake your tokens first."},{"code":6034,"name":"InvalidApproval","msg":"The approval arguments do not match the split request."},{"code":6035,"name":"Other","msg":"Other"}]}')},"../staking/lib/target/idl/wallet_tester.json":function(e){e.exports=JSON.parse('{"version":"1.0.0","name":"wallet_tester","instructions":[{"name":"test","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"testReceipt","isMut":true,"isSigner":false,"pda":{"seeds":[{"kind":"account","type":"publicKey","path":"payer"}]}},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]}]}')},"../wasm/bundle/staking_bg.wasm":function(e,t,n){n.a(e,(async function(r,i){try{var a,o=r([a=n("../wasm/bundle/staking_bg.js")]),[a]=o.then?(await o)():o;await n.v(t,e.id,"4b12b60eb11f860a",{"./staking_bg.js":{__wbindgen_string_new:a.h4,__wbg_instruction_new:a.EL,__wbg_pubkey_new:a.bJ,__wbindgen_string_get:a.qt,__wbindgen_object_drop_ref:a.ug,__wbindgen_number_get:a.M1,__wbindgen_is_undefined:a.XP,__wbindgen_number_new:a.pT,__wbg_debug_fda1f49ea6af7a1d:a.Z1,__wbg_error_8ff19d586a987aef:a.pt,__wbg_info_c8f1b00be4ef10bc:a.g5,__wbg_log_e8ba7b992c7ad0eb:a.kq,__wbg_warn_0227db1aa6989248:a.lX,__wbg_new_693216e109162396:a.Ih,__wbg_stack_0ddaca5d1abfb52f:a.yq,__wbg_error_09919627ac0992f5:a.gk,__wbg_new_94fb1279cf6afea5:a.j1,__wbindgen_is_function:a.o$,__wbindgen_is_object:a.Wl,__wbg_next_cabb70b365520721:a.Ge,__wbg_next_bf3d83fc18df496e:a.ID,__wbg_done_040f966faa9a72b3:a.Zn,__wbg_value_419afbd9b9574c4c:a.fg,__wbg_iterator_4832ef1f15b0382b:a.vz,__wbg_get_a9cab131e3152c49:a.Rb,__wbg_call_ae78342adc33730a:a._3,__wbg_newwithlength_e80fb11cf19c1628:a.Yr,__wbg_set_561aac756158708c:a.GW,__wbg_isArray_6721f2e508996340:a._8,__wbg_push_40c6a90f1805aa90:a.JX,__wbg_values_b1b9e8c63dbe01c2:a.PN,__wbg_buffer_7af23f65f6c64548:a.EF,__wbg_new_cc9018bd6f283b6f:a.cb,__wbg_set_f25e869e4565d2a2:a.Ip,__wbg_length_0acb1cf9bbaf8519:a.Oo,__wbg_instanceof_Uint8Array_edb92795fc0c63b4:a.Cp,__wbindgen_debug_string:a.fY,__wbindgen_throw:a.Or,__wbindgen_memory:a.oH}}),i()}catch(s){i(s)}}),1)}}]);